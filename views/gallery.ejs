<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gallery OwO</title>
  <link rel="stylesheet" href="/css/gallery.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="navbar">
    <a href="/">Home</a>
    <a href="/gallery">Gallery</a>
    <a href="/about">About Project</a>
    <a href="/local/about">About Station</a>
    <div class="mode-toggle" style="display: inline-block; margin-top: 8px; width: 15%">
    <label class="switch">
      <input type="checkbox" id="simplifiedMode" <% if (simplified) { %>checked<% } %>>
      <span class="slider round"></span>
    </label>
    <span>Simple View</span>
  </div>
    <div class="menu-dropdown">
      <button class="menu-dropbtn">â˜°</button>
      <div class="menu-dropdown-content">
       <a href="/local/satdump">Satdump</a>
       <a href="/local/stats">System</a>
       <a href="/login">Log In</a>
       <a href="/local/admin">Admin Panel</a>
      </div>
    </div>
  </div>
  <br>

  <% if (simplified) { %>
    <%- include('partials/simplified-view') %>
  <% } else { %>
    <%- include('partials/advanced-view') %>
  <% } %>

  <script>
    // Global variables for view mode
    const isSimplified = <%= simplified %>;
    const initialData = <%- JSON.stringify(initialData) %>;
    
    // Mode toggle functionality
    document.getElementById('simplifiedMode').addEventListener('change', function() {
      const newMode = this.checked ? 'simple' : 'advanced';
      window.location.href = `/gallery?mode=${newMode}`;
    });
  </script>
  
  <% if (mode === 'advanced') { %>
  <script src="/js/advanced-view.js"></script>
  <% } else { %>
  <script src="/js/simplified-view.js"></script>
  <% } %>
<script src="/js/shared-view.js"></script>
</body>
</html>